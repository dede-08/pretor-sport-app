
<!-- Hero Section -->
<div class="hero-section">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6">
        <h1 class="hero-title">Bienvenido a Pretor Sport</h1>
        <p class="hero-subtitle">Descubre la mejor selección de productos deportivos para todas tus actividades</p>
        <div class="hero-buttons">
          <a routerLink="/productos" class="btn btn-primary btn-lg me-3">Ver Productos</a>
        </div>
      </div>
      <div class="col-lg-6">
        <!--<div class="hero-image">
          <img src="https://via.placeholder.com/600x400/007bff/ffffff?text=Pretor+Sport" 
               alt="Pretor Sport" class="img-fluid rounded">
        </div>-->
      </div>
    </div>
  </div>
</div>

<!-- Loading State -->
<div *ngIf="loading" class="container my-5">
  <div class="text-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
    <p class="mt-3">Cargando productos...</p>
  </div>
</div>

<!-- Error State -->
<div *ngIf="error" class="container my-5">
  <div class="alert alert-danger text-center" role="alert">
    <h4 class="alert-heading">¡Oops!</h4>
    <p>{{ errorMessage }}</p>
    <hr>
    <button class="btn btn-outline-danger" (click)="cargarProductos()">
      <i class="fas fa-redo me-2"></i>Intentar de nuevo
    </button>
  </div>
</div>

<!-- Main Content -->
<div *ngIf="!loading && !error" class="main-content">
  
  <!-- Productos Destacados -->
  <section *ngIf="productosDestacados.length > 0" class="featured-products py-5">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <h2 class="section-title text-center mb-5">
            Productos Destacados
          </h2>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="product-grid">
            <div *ngFor="let producto of productosDestacados" class="product-card">
              <div class="product-image">
                <img [src]="obtenerImagenProducto(producto)" 
                     [alt]="producto.nombre" 
                     class="img-fluid"
                     (error)="configService.handleImageError($event)">
                <div class="product-badges">
                  <span class="badge badge-featured">Destacado</span>
                  <span *ngIf="producto.descuentoPorcentaje && producto.descuentoPorcentaje > 0" 
                        class="badge badge-discount">
                    -{{ producto.descuentoPorcentaje }}%
                  </span>
                </div>
              </div>
              <div class="product-info">
                <h5 class="product-name">{{ producto.nombre }}</h5>
                <p class="product-description">{{ producto.descripcion }}</p>
                <div class="product-price">
                  <span *ngIf="producto.descuentoPorcentaje && producto.descuentoPorcentaje > 0" 
                        class="price-original">{{ formatearPrecio(producto.precio) }}</span>
                  <span class="price-current">
                    {{ formatearPrecio(calcularPrecioConDescuento(producto.precio, producto.descuentoPorcentaje)) }}
                  </span>
                </div>
                <div class="product-meta">
                  <span class="badge" [ngClass]="obtenerClaseEstadoStock(producto)">
                    {{ obtenerEstadoStock(producto) }}
                  </span>
                  <span *ngIf="producto.categoria" class="product-category">
                    {{ producto.categoria.nombre }}
                  </span>
                </div>
                <button class="btn btn-primary btn-sm w-100 mt-2" 
                        [disabled]="!tieneStock(producto)"
                        (click)="agregarAlCarrito(producto)">
                  <i class="fas fa-shopping-cart me-2"></i>
                  {{ tieneStock(producto) ? 'Agregar al Carrito' : 'Sin Stock' }}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Productos en Oferta -->
  <section *ngIf="productosOferta.length > 0" class="offer-products py-5 bg-light">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <h2 class="section-title text-center mb-5">
            <i class="fas fa-percentage text-danger me-2"></i>
            Ofertas Especiales
          </h2>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="product-grid">
            <div *ngFor="let producto of productosOferta" class="product-card">
              <div class="product-image">
                <img [src]="obtenerImagenProducto(producto)" 
                     [alt]="producto.nombre" 
                     class="img-fluid"
                     (error)="configService.handleImageError($event)">
                <div class="product-badges">
                  <span class="badge badge-discount">
                    -{{ producto.descuentoPorcentaje }}%
                  </span>
                </div>
              </div>
              <div class="product-info">
                <h5 class="product-name">{{ producto.nombre }}</h5>
                <p class="product-description">{{ producto.descripcion }}</p>
                <div class="product-price">
                  <span class="price-original">{{ formatearPrecio(producto.precio) }}</span>
                  <span class="price-current">
                    {{ formatearPrecio(calcularPrecioConDescuento(producto.precio, producto.descuentoPorcentaje)) }}
                  </span>
                </div>
                <div class="product-meta">
                  <span class="badge" [ngClass]="obtenerClaseEstadoStock(producto)">
                    {{ obtenerEstadoStock(producto) }}
                  </span>
                  <span *ngIf="producto.categoria" class="product-category">
                    {{ producto.categoria.nombre }}
                  </span>
                </div>
                <button class="btn btn-danger btn-sm w-100 mt-2" 
                        [disabled]="!tieneStock(producto)"
                        (click)="agregarAlCarrito(producto)">
                  <i class="fas fa-shopping-cart me-2"></i>
                  {{ tieneStock(producto) ? 'Agregar al Carrito' : 'Sin Stock' }}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Todos los Productos -->
  <section *ngIf="productos.length > 0" class="all-products py-5">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <h2 class="section-title text-center mb-5">
            <i class="fas fa-th-large text-primary me-2"></i>
            Nuestros Productos
          </h2>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="product-grid">
            <div *ngFor="let producto of productos" class="product-card">
              <div class="product-image">
                <img [src]="obtenerImagenProducto(producto)" 
                     [alt]="producto.nombre" 
                     class="img-fluid"
                     (error)="configService.handleImageError($event)">
                <div class="product-badges">
                  <span *ngIf="producto.descuentoPorcentaje && producto.descuentoPorcentaje > 0" 
                        class="badge badge-discount">
                    -{{ producto.descuentoPorcentaje }}%
                  </span>
                </div>
              </div>
              <div class="product-info">
                <h5 class="product-name">{{ producto.nombre }}</h5>
                <p class="product-description">{{ producto.descripcion }}</p>
                <div class="product-price">
                  <span *ngIf="producto.descuentoPorcentaje && producto.descuentoPorcentaje > 0" 
                        class="price-original">{{ formatearPrecio(producto.precio) }}</span>
                  <span class="price-current">
                    {{ formatearPrecio(calcularPrecioConDescuento(producto.precio, producto.descuentoPorcentaje)) }}
                  </span>
                </div>
                <div class="product-meta">
                  <span class="badge" [ngClass]="obtenerClaseEstadoStock(producto)">
                    {{ obtenerEstadoStock(producto) }}
                  </span>
                  <span *ngIf="producto.categoria" class="product-category">
                    {{ producto.categoria.nombre }}
                  </span>
                </div>
                <button class="btn btn-outline-primary btn-sm w-100 mt-2" 
                        [disabled]="!tieneStock(producto)"
                        (click)="agregarAlCarrito(producto)">
                  <i class="fas fa-shopping-cart me-2"></i>
                  {{ tieneStock(producto) ? 'Agregar al Carrito' : 'Sin Stock' }}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- No Products Message -->
  <div *ngIf="productos.length === 0 && productosDestacados.length === 0 && productosOferta.length === 0" 
       class="container my-5">
    <div class="text-center">
      <i class="fas fa-box-open fa-3x text-muted mb-3"></i>
      <h3>No hay productos disponibles</h3>
      <p class="text-muted">Pronto tendremos nuevos productos para ti.</p>
    </div>
  </div>
</div>
